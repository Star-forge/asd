{% load staticfiles %}
<html xmlns="http://www.w3.org/1999/xhtml">
    <style>
        @font-face {
            font-family: 'RZD';
            /* Если шрифты в браузере отображаются не сглаженными, то сглаживание надо включить в ОС (Браузере).
             Такая проблема известна в хром. В осле при этом все норм.
             Это связано с отключенным по-умолчанию сглаживанием экранных шрифтов.*/
            src: local(''),       /* sneakily trick IE */
                url('{% static 'fonts/RussianRail G Pro Extend.otf' %}'), /* IE 5-8 */
                url('{% static 'fonts/RussianRail G Pro Extend.woff2' %}') format('woff2'),  /*  */
                url('{% static 'fonts/RussianRail G Pro Extend.woff' %}') format('woff'),  /* FF 3.6, Chrome 5, IE9 */
                url('{% static 'fonts/RussianRail G Pro Extend.ttf' %}') format('truetype'), /* Opera, Safari */
                url('{% static 'fonts/RussianRail G Pro Extend.svg' %}') format('svg'); /* iOS */
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'RZD Bold';
            src: local(''),       /* sneakily trick IE */
                url('{% static 'fonts/RussianRail G Pro Extended Bold.otf' %}'),
                url('{% static 'fonts/RussianRail G Pro Extended Bold.woff2' %}') format('woff2'),  /*  */
                url('{% static 'fonts/RussianRail G Pro Extended Bold.woff' %}') format('woff'),  /* FF 3.6, Chrome 5, IE9 */
                url('{% static 'fonts/RussianRail G Pro Extended Bold.ttf' %}') format('truetype'), /* Opera, Safari */
                url('{% static 'fonts/RussianRail G Pro Extended Bold.svg' %}') format('svg'); /* iOS */
            font-weight: bold;
            font-style: normal;
        }
         body{
             font-family: 'RZD';
         }

    </style>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" href="{% static 'css/_base.css' %}"/>
        <script src="{% static 'js/headline.js' %}"></script>
        <title>АСД РМ</title>
    </head>
    <body class="body-main" onload="doHeadlineVisibility()">
    <script type="text/javascript" language="javascript">
        function ShowDescription(ID) {
            var d = GetObject(ID + "Description")
            var i = GetObject(ID + "Img")


            if (d.style.display == "none") {
                d.style.display = "block"
                i.src = "{% static 'img/minus.png' %}"
            }
            else {
                d.style.display = "none"
                i.src = "{% static 'img/plus.png' %}"
            }
        }
    </script>
    <table class="tbody header" border = "0" cellspacing="0">
        <tbody>
        <tr class="tbody-tr header"><td colspan="6"></td></tr>
        <tr class="tbody-tr header"><td colspan="6"></td></tr>
        <tr class="tbody-tr header">
            <td class="tbody-td-1-header"></td>
            <td colspan="4">
                <b><span style="font-family: 'RZD Bold'; text-transform: uppercase; font-size: 200%">Курсовой проект</span></b>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        <tr class="tbody-tr header">
            <td class="tbody-td-1-header"></td>
            <td colspan="4">
                <b><span style="font-size:150%">«Автоматизированная система дистанционной диагностики рабочего места пользователя диспетчерского центра управления железнодорожными перевозками»</span>
                <span style="display: none; font-size:smaller">«Автоматизированная информационная система поддержки принятия решений системного администратора ЕДЦУ</span></b>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        <tr class="tbody-tr header" id="headline">
                <td class="tbody-td-1-header"><img src="{% static 'img/1_line.png' %}" width="50px" height="50px"/></td>
                <td class="tbody-td-2-header"><img src="{% static 'img/1_line.png' %}" width="100%" height="50px"/></td>
                <td class="tbody-td-3-header"><img src="{% static 'img/2_line.png' %}" width="50px" height="50px"/></td>
                <td class="tbody-td-3-header"><img src="{% static 'img/3_line.png' %}" width="50px" height="50px"/></td>
                <td class="tbody-td-4-header"><img src="{% static 'img/4_line.png' %}" width="50px" height="50px"/></td>
                <td class="tbody-td-5-header"><img src="{% static 'img/5_line.png' %}" width="50px" height="50px"/></td>
        </tr>
        <tr class="tbody-tr header" id="ieline">
            <td style="padding: 0px;"><img src="{% static 'img/1_line.png' %}" width="100%" height="50px"/></td>
            <td colspan="4" style="padding: 0px;"><img src="{% static 'img/1_line.png' %}" width="100%" height="50px"/></td>
            <td style="padding: 0px;"><img src="{% static 'img/1_line.png' %}" width="100%" height="50px"/></td>
        </tr>
        </tbody></table>
        <table class="tbody header" border = "0" cellspacing="0">
        <tbody>
        <tr class="tbody-tr bottom">
            <td class="tbody-td-1-header"></td>
            <td colspan="4">
                <div>
                    <table class="TransparentTable" border = "0"><tbody>
                        <tr>
                            <td class="noborder" valign="top" align="right"><b>Здравствуйте<span class="username">
                                {% if user.is_authenticated %}
                                    <a href="/admin/">{{ user.username }}</a></span>
                                {% else %}
                                    </span>, Вам необходимо
                                {% endif %}
                            </b></td>
                            <td class="noborder">
                                {% if user.is_authenticated %}
                                    <a href="{% url 'asdrm_testsuite_list' %}">Аналитика (список выполненных проверок)</a></br>
                                    <a href="/admin/">Администрирование сервера</a></br>
                                    <a href="/logout/">Выйти</a>
                                {% else %}
                                    представиться, чтобы начать пользоваться системой диагностики.
                                    </td></tr>
                                    <tr><td class="noborder" align="right"></br>
                                     <form action="" method="post">
                                         {% csrf_token %}
                                        <table>
                                        <tr>
                                            <td>{{ form.username.label_tag }}</td>
                                            <td>{{ form.username }}</td>
                                        </tr>
                                        <tr>
                                            <td>{{ form.password.label_tag }}</td>
                                            <td>{{ form.password }}</td>
                                        </tr>
                                        </table>

                                        <input type="submit" value="Войти" />
                                        <input type="hidden" name="next" value="{{ next }}" />
                                      </form>
                                    <p><a href="{% url 'password_reset' %}">Восстановить пароль</a></p>
                                {% endif %}
                                </br></b></td><td class="noborder" valign="top">
                                {% if not user.is_authenticated %}
                                    </br></br>Или <a href="/register/">Зарегистрироваться</a>, если у вас ещё нет учётной записи.
                                {% endif %}
                            </td>
                        </tr>
                    </tbody></table>
		        </div><br/>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        <tr class="tbody-tr bottom">
            <td class="tbody-td-1-header"></td>
            <td colspan="4">
                <div style="padding: 0px; margin: 0px; {% if not user.is_authenticated %} display: none; {% endif %} "  id="headdiv">
                    <table cellpadding="4" cellspacing="4" style=""><tbody>
                        <tr>
                            <td class="noborder" style="text-wrap: none">IP, РМ или полное сетевое имя:</td>
                            <td class="noborder"><input id="IP" style="width: 190px; visibility: visible;" type="text" value="" onkeypress="KeyStart(event)" tabindex="0"></td>
                            <td class="noborder" style=""><input id="StartButton" type="button" value="Диагностировать" onclick="Start()" class="but"></td>
                        </tr>
                    </tbody></table>
                </div>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        <tr class="tbody-tr bottom"><td colspan="6"></td></tr>
        <tr class="tbody-tr bottom">
            <td class="tbody-td-1-header"></td>
            <td colspan="4">
                <div {% if not testParamTitles %} style="display: none;" {% endif %}>
                    <table class="TableResult" border="2" width="100%">
                        <h2>Результаты проверки РМ - {{ testsuite.ipv4 }}</h2>
                        <!--
                        <caption class="TableResultCaption" >Результаты проверки</caption>
                        -->
                        <thead>
                            <tr>
                                <th class="td1">Диагностируемый параметр</th>
                                <th class="td11"></th>
                                <th class="td2">Статус проверки</th>
                                <th class="td3">Результаты выполнения диагностики</th>
                                <th class="td4">Рекомендуемые действия</th>
                            </tr>
                        </thead>
                        <tbody id="MainTable">
                        {% for testParamTitle in testParamTitles %}
                            <tr>
                                <td class="title_block" colspan="5">{{ testParamTitle }}</td>
                            </tr>
                            {% for testSuiteCase in testSuiteCases %}
                                {% if testSuiteCase.parameter.title == testParamTitle %}
                                <tr id='{{testSuiteCase.parameter.id}}'>
                                    <td class="td1">
                                        <div><b> {{ testSuiteCase.parameter.name }}</b></div>
                                            <table>
                                                <tbody>
                                                    <tr>
                                                        <td class="noborder">
                                                            <img src="{% static 'img/plus.png' %}" alt="" class="but" style="cursor: pointer; cursor: hand; margin:2px;" title="" onclick="ShowDescription(&#39;{{testSuiteCase.parameter.id}}&#39;)" id="{{testSuiteCase.parameter.id}}Img">
                                                        </td>
                                                        <td class="noborder" nowrap>Описание проверки</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        <div style="display: none; font-size: smaller; width: 290px;" id="{{testSuiteCase.parameter.id}}Description">{{ testSuiteCase.parameter.info }}</div>
                                    </td>
                                    <td class="td11"></td>
                                    <td class="td2" {% if testSuiteCase.status.text == 'OK' %}
                                        style="color: green"
                                    {% elif testSuiteCase.status.text == 'FAIL' %}
                                        style="color: red"
                                    {% endif %}><b>{{ testSuiteCase.status.text }}</b></td>
                                    <td class="td3"><b>
                                        {% if testSuiteCase.result|slice:"0:1" == '0' %}
                                            <span style="color: green">
                                        {% elif testSuiteCase.result|slice:"0:1" == '1' %}
                                            <span style="color: red">
                                        {% elif testSuiteCase.result|slice:"0:1" == '2' %}
                                            <span style="color: yellow">
                                        {% elif testSuiteCase.result|slice:"0:1" == '3' %}
                                            <span style="color: blue">
                                        {% endif %}
                                    {{testSuiteCase.result|slice:"1:"|linebreaks}}</span></b></td>

                                    <td class="td4"></td>
                                </tr>
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        </tbody></table>
        <table class="tbody header" border = "0" cellspacing="0">
        <tbody>
        <tr class="tbody-tr bottom"><td colspan="6"></td></tr>
        <tr class="tbody-tr bottom">
            <td class="tbody-td-1-header"></td>
            <td colspan="3">
                <b>2016 - <script type="text/javascript">
                dt = new Date();document.write("" + dt.getFullYear());
                </script> © Лабор Максим Николаевич</b>
            </td>
            <td class="tbody-td-4-header">
                <img src="{% static 'img/logo_rzd.gif' %}" alt="РЖД" align="right"/>
            </td>
            <td class="tbody-td-5-header"></td>
        </tr>
        <tr class="tbody-tr bottom"><td colspan="6"></td></tr>
        </tbody></table>
    </body>
</html>